{% assign current_date_ts = site.time | date: '%Y-%m-%d' | date: '%s' %}
{% assign shown_count = 0 %}
{% assign past_count = 0 %}
{% assign limit = 4 %}

{% assign sorted_events = site.events | sort: "date" | reverse %}

<!-- Count past events -->
{% for event in sorted_events %}
{% assign event_ts = event.date | date: '%s' %}
{% if event_ts < current_date_ts %} {% assign past_count=past_count | plus: 1 %} {% endif %} {% endfor %} <section
    class="bg-gradient-to-b from-teal to-green py-12 md:py-16 px-4 md:px-8">
    <div class="max-w-7xl mx-auto">
        <div class="text-center mb-10">
            <h2 class="text-5xl md:text-6xl font-black text-white mb-4 uppercase tracking-tight">
                Past Events
            </h2>
            <div class="h-1 w-20 bg-aqua mx-auto rounded-full"></div>
        </div>

        <!-- Events Grid -->
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5 md:gap-6 mb-12">
            {% for event in sorted_events %}
            {% assign event_ts = event.date | date: '%s' %}
            {% if event_ts < current_date_ts %} {% if shown_count < limit %} {% include event-card.html event=event
                vertical=true %} {% assign shown_count=shown_count | plus: 1 %} {% endif %} {% endif %} {% endfor %}
                </div>

                {% if past_count > limit %}
                <div class="text-center">
                    <a href="/events"
                        class="inline-flex items-center justify-center px-12 py-5 bg-twilight text-white font-black text-lg md:text-xl rounded-full shadow-xl hover:bg-french transition-all transform hover:-translate-y-1 group">
                        <i
                            class="fa-solid fa-calendar-days mr-3 text-2xl group-hover:scale-110 transition-transform"></i>
                        Check More Past Events
                        <i class="fa-solid fa-arrow-right ml-3 group-hover:translate-x-1 transition-transform"></i>
                    </a>
                </div>
                {% endif %}

        </div>
        </section>